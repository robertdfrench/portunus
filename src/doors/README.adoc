== Interface with the Doors API
_What are doors? Are they friendly? Why am I on this webpage?_
 
image::tldr.gif[]

Doors are like
https://lists.freebsd.org/pipermail/freebsd-performance/2005-February/001143.html[Unix
Domain Sockets], but faster.  Because they exist on the filesystem, we can refer
to them by their *path*, but we have to create them in an unusual way:

. Create a _new_ file on the filesystem at `path`.
. Create a `descriptor` for the handler function with
https://illumos.org/man/3c/door_create[`DOOR_CREATE(3C)`].
. Use https://illumos.org/man/3c/fattach[`FATTACH(3C)`] to _temporarily_ replace
the file at `path` with the function pointed to by `descriptor`.

=== Doors in Portunus

Portunus does not use the entire Doors API, or even most of it. The
link:native.rs[native.rs] module provides Rust-friendly definitions for the
function calls and structs that we _do_ use, and link:mod.rs[mod.rs] provides a
safe interface for the rest of the application.

The link:pathutils.rs[pathutils.rs] module provides an extra trick to simplify
door creation: a https://en.wikipedia.org/wiki/Jamb[Jamb] provides a temporary,
https://www.reddit.com/r/illumos/comments/babxsl/doors_api_tutorial/eke7es9/[correctly
constructes] filesystem path from which we can hang a door.
